import{Hono as H}from"hono";import{serveStatic as d}from"@hono/node-server/serve-static";import a from"nunjucks";import g from"fs";import o from"path";import x from"js-yaml";import S from"markdown-it";import _ from"markdown-it-anchor";import h from"highlight.js/lib/common";import{fileURLToPath as I}from"url";var P=I(import.meta.url),m=o.dirname(P);function R(l){let e=new H,r;a.configure(o.join(m,"templates"),{autoescape:!0,watch:!1,noCache:!0});let p=a.render("./pages/demo.njk",{manifest:r}),f=a.render("./pages/prerender.njk",{manifest:r}),c=a.render("./pages/landing.njk",{manifest:r}),n=a.render("./pages/docs.njk",{text:b(l),manifest:r});return e.use("/css/*",d({root:o.join(m,"templates")})),e.use("/js/*",d({root:o.join(m,"templates")})),e.use("/assets/*",d({root:o.join(m,"templates")})),e.use("/favicon.png",d({path:o.join(m,"templates/favicon.png")})),e.get("/prerender",async t=>t.html(f)),e.get("/demo",t=>t.html(p)),e.get("/documentation",t=>t.html(n)),e.get("/",t=>t.html(c)),{name:"vite:playground-serv",async buildStart(){let t=o.resolve(process.cwd(),"src/manifest.yaml"),s=g.readFileSync(t,"utf8");r=x.load(s,"utf8")},configureServer(t){t.middlewares.use(async(s,u,j)=>{let y=new Request(`http://localhost${s.url}`,{method:s.method,headers:s.headers}),i=await e.fetch(y);if(!i.ok){j();return}u.statusCode=i.status,i.headers.forEach((w,k)=>{u.setHeader(k,w)});let v=await i.arrayBuffer();u.end(Buffer.from(v))})}}}function b(l){let e=S({highlight:function(c,n){if(n&&h.getLanguage(n))try{return'<pre><code class="hljs">'+h.highlight(c,{language:n,ignoreIllegals:!0}).value+"</code></pre>"}catch{}return'<pre><code class="hljs">'+e.utils.escapeHtml(c)+"</code></pre>"}});e.use(_);let r=o.resolve(`${l}/openmfe/index.md`),p=g.readFileSync(r,"utf8");return e.render(p)}export{R as default};
//# sourceMappingURL=index.js.map
